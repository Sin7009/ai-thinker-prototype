# AI Thinker Prototype: Cognitive Partner Architecture

**AI Thinker** — это прототип когнитивного агента, реализующий архитектуру «Гибридного Разума». В отличие от классических чат-ботов, система разделяет процесс **управления диалогом** (детерминированный Оркестратор) и процесс **генерации мышления** (LLM-агенты).

Проект нацелен на создание не просто помощника, а методологического партнера, способного диагностировать когнитивные искажения пользователя и применять техники мышления (Scaffolding) для решения сложных задач.

## Ключевые особенности

  * **Двухконтурная архитектура:**
      * **Внешний контур (Тренажер):** Явные методики мышления (Метод Утенка, 5 Почему) для совместного решения задач.
      * **Внутренний контур (Оркестратор):** Скрытый анализ состояния диалога, переключение режимов и управление памятью.
  * **Психолингвистическая диагностика:** Специализированный `DetectorAgent` анализирует текст на наличие когнитивных искажений (CBT), эмоциональный тон и стиль коммуникации, не вмешиваясь в прямой диалог.
  * **Гибридная память:**
      * **SQLite:** Хранение профиля пользователя, выявленных черт характера и статистики когнитивных паттернов.
      * **ChromaDB (Vector Store):** Семантический поиск по истории диалогов для обеспечения контекстной связности (RAG).
  * **Режимы работы:** Переключение между режимом прямого исполнения (`Copilot`) и режимом совместного рассуждения (`Partner`).

## Архитектура системы

Система построена на базе **Python** и **LangChain**, используя **GigaChat Pro** в качестве LLM-бэкенда.

### Основные модули

1.  **Orchestrator (`orchestrator/`)**:
      * Центральная State Machine. Принимает ввод пользователя, вызывает диагностику, решает, какой агент должен ответить, и управляет записью в память.
2.  **Agents (`agents/`)**:
      * `TaskAgent`: Отвечает за прямые ответы на вопросы (режим Copilot) и выполнение служебных задач (резюмирование).
      * `MethodologyAgent`: Реализует сложные техники мышления, используя промпты из `ActionLibrary`.
      * `DetectorAgent`: Классификатор, возвращающий структурированный JSON с анализом искажений и эмоций.
3.  **Database (`database/`)**:
      * ORM-модели (SQLAlchemy) для пользователей, паттернов и логов диалога.

## Установка и запуск

### Предварительные требования

  * Python 3.8+
  * Доступ к GigaChat API (получить `GIGACHAT_CREDENTIALS`).

### Шаги установки

1.  **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/your-username/ai-thinker-prototype.git
    cd ai-thinker-prototype
    ```

2.  **Установите зависимости:**

    ```bash
    pip install -r requirements.txt
    ```

    *Основные зависимости: `langchain-gigachat`, `chromadb`, `sqlalchemy`, `sentence-transformers`*.

3.  **Настройте переменные окружения:**
    Создайте переменные окружения или `.env` файл:

    ```bash
    export GIGACHAT_CREDENTIALS='ваш_ключ_авторизации'
    ```

4.  **Запуск:**

    ```bash
    python main.py
    ```

    При первом запуске система автоматически инициализирует базу данных SQLite (`agent_memory.db`) и хранилище векторов (`chroma_storage`).

## Использование

После запуска `main.py` вы попадете в интерактивный CLI-интерфейс.

**Доступные команды:**

  * `/copilot` — (По умолчанию) Режим ассистента. Прямые ответы, выполнение задач.
  * `/partner` — Режим методологического партнера. Агент не дает готовых решений, а использует техники (например, "5 Почему" или "Метод Утенка") для помощи в рассуждениях.
  * `/memory` — Показать сводку профиля пользователя: что агент "помнит" о вас, ваши выявленные паттерны мышления и стиль общения.
  * `/reset` — Сброс контекстной памяти текущей сессии.
  * `/exit` — Завершение сессии с генерацией итогового резюме.

## Библиотека действий (Action Library)

В режиме `/partner` Оркестратор динамически выбирает одну из стратегий на основе запроса пользователя:

1.  **Rubber Duck Debugging:** Если пользователь застрял в технической проблеме или не может сформулировать мысль.
2.  **Five Whys:** Поиск корневой причины проблемы.
3.  **Constrained Brainstorming:** Генерация идей с наложением искусственных ограничений для преодоления творческого ступора.

-----

*Project by Konstantin Knyazev. 2025.*
